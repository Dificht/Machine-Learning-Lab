# Описание датасета LUNA16

## Общая информация
LUNA16 (LUng Nodule Analysis 2016) — это открытый набор данных для задачи обнаружения узелков в лёгких по КТ-сканам.  
Датасет состоит из томографических исследований в формате **MHD/RAW**, а также вспомогательных CSV‑файлов с аннотациями и кандидатами.

⚠️ Датасет **не включён** в репозиторий из-за большого размера (сотни гигабайт).  
Его необходимо скачать отдельно с официальной страницы: [LUNA16 Challenge](http://luna16.grand-challenge.org/download/).

## Структура папок
После скачивания данные должны быть размещены в папке `LUNA_dataset/` в корне проекта:

LUNA_dataset/
│
├── subset0/               # Подмножество томов (MHD + RAW)
├── subset1/
├── subset2/
...
├── subset9/
│
├── annotations.csv         # Аннотации узлов (истинные метки)
├── candidates.csv          # Кандидаты узлов (положительные/отрицательные)

## Форматы файлов

### 1. Томографические данные
- **Формат:** `.mhd` + `.raw`
- **Описание:**
  - `.mhd` — мета‑файл, содержит информацию о размере тома, spacing (размер вокселя), origin (начало координат), направление осей.
  - `.raw` — бинарный файл с самими значениями интенсивности (HU — Hounsfield Units).
- **Использование:** читаются через библиотеку `SimpleITK`.

### 2. `annotations.csv`
- Содержит список истинных узлов, размеченных экспертами.
- Формат строк: seriesuid, coordX, coordY, coordZ, diameter_mm

- `seriesuid` — идентификатор серии (имя файла без расширения),
- `coordX, coordY, coordZ` — координаты центра узла в миллиметрах,
- `diameter_mm` — диаметр узла.

### 3. `candidates.csv`
- Содержит список всех кандидатов (как узлы, так и неузлы).
- Формат строк: seriesuid, coordX, coordY, coordZ, class

- `seriesuid` — идентификатор серии,
- `coordX, coordY, coordZ` — координаты центра кандидата,
- `class` — метка (1 = узел, 0 = не узел).

## Объём данных
- Всего ~1000 КТ-исследований.
- Общий размер: ~150 ГБ.
- Количество аннотированных узлов: ~1186.
- Количество кандидатов: ~750,000 (включая отрицательные).

## Использование в проекте
- **`annotations.csv`** используется для сопоставления кандидатов с истинными узлами и получения диаметра.
- **`candidates.csv`** используется для формирования списка всех потенциальных узлов.
- **`.mhd/.raw`** файлы используются для извлечения 3D‑патчей вокруг координат кандидатов.

## Примечания
- Данные должны быть предварительно распакованы.
- При работе с томами значения HU клиппируются в диапазон [-1000, 1000].
- Для корректного сопоставления координат используется информация из `.mhd` (origin, spacing, direction).
